<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>UE Blueprint</title>
    <link rel="stylesheet" href="dist/css/ueb-style.min.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            --ueb-height: 100vh;
        }

        .floating-input {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 10;
            padding: 8px 16px;
            font-size: 14px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 4px;
            background: rgba(40, 40, 40, 0.9);
            color: #fff;
            outline: none;
            min-width: 250px;
            font-family: 'Roboto', sans-serif;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .floating-input:focus {
            border-color: rgba(84, 122, 156, 0.8);
            box-shadow: 0 4px 16px rgba(84, 122, 156, 0.4);
        }

        .floating-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        ueb-blueprint {
            position: relative;
            display: block;
        }

        /* Node Search Context Menu */
        .node-search-menu {
            position: fixed;
            background: rgba(30, 30, 30, 0.98);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.6);
            min-width: 350px;
            max-width: 500px;
            max-height: 500px;
            display: none;
            flex-direction: column;
            z-index: 10000;
            font-family: 'Roboto', sans-serif;
            backdrop-filter: blur(10px);
        }

        .node-search-menu.visible {
            display: flex;
        }

        .node-search-input {
            padding: 12px 16px;
            background: rgba(50, 50, 50, 0.9);
            border: none;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            color: #fff;
            font-size: 14px;
            outline: none;
            border-radius: 6px 6px 0 0;
        }

        .node-search-input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .node-search-results {
            overflow-y: auto;
            max-height: 440px;
            padding: 4px;
        }

        .node-search-item {
            padding: 10px 12px;
            cursor: pointer;
            border-radius: 4px;
            margin: 2px 0;
            transition: background 0.15s;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .node-search-item:hover,
        .node-search-item.selected {
            background: rgba(84, 122, 156, 0.3);
        }

        .node-search-item-name {
            color: #fff;
            font-weight: 500;
            font-size: 13px;
        }

        .node-search-item-type {
            color: rgba(255, 255, 255, 0.5);
            font-size: 11px;
        }

        .node-search-item-desc {
            color: rgba(255, 255, 255, 0.6);
            font-size: 11px;
            margin-top: 2px;
            line-height: 1.3;
        }

        .node-search-no-results {
            padding: 20px;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            font-size: 13px;
        }

        /* Hide the info icon and header at the top */
        .ueb-info,
        .ueb-viewport-about,
        .ueb-viewport-header {
            display: none !important;
        }
    </style>
</head>

<body>
    <script type="module">
        import { Blueprint, NodeElement } from "./dist/ueblueprint.js"
        // Make NodeElement globally accessible for the main script
        window.NodeElement = NodeElement;
    </script>

    <!-- Node Search Context Menu -->
    <div class="node-search-menu" id="nodeSearchMenu">
        <input type="text" class="node-search-input" id="nodeSearchInput" placeholder="Search for a node..." />
        <div class="node-search-results" id="nodeSearchResults"></div>
    </div>

    <code>
        <ueb-blueprint>
            <template>
                Begin Object Class="/Script/BlueprintGraph.K2Node_FunctionEntry" Name="K2Node_FunctionEntry_11" ExportPath=/Script/BlueprintGraph.K2Node_FunctionEntry'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_FunctionEntry_11"'
                    bEnforceConstCorrectness=False
                    FunctionReference=(MemberParent=/Script/CoreUObject.Class'"/Script/Engine.Actor"',MemberName="UserConstructionScript")
                    NodePosX=-416
                    NodePosY=-208
                    NodeGuid=521B69F742A30F8EA5B92B8CC131AB54
                    CustomProperties Pin (PinId=71907A84935B4C5CAAB3008925461DF1,PinName="then",Direction="EGPD_Output",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_4248 25CB1132A7BA49AB925A8FA318964E23,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_VariableGet" Name="K2Node_VariableGet_1" ExportPath=/Script/BlueprintGraph.K2Node_VariableGet'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_VariableGet_1"'
                    VariableReference=(MemberName="PointLight2",MemberGuid=1AB0457660F94A2ED12420B8AEE681DC,bSelfContext=True)
                    NodePosX=-448
                    NodePosY=-32
                    NodeGuid=10979856497BCAB0294340A98E5231DE
                    CustomProperties Pin (PinId=31AFCE7083BE417EA1B4267CAD23C84F,PinName="PointLight2",Direction="EGPD_Output",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_Knot_0 D2794C8E4DB3434AAB92AC0592A1CDAD,K2Node_Knot_1 7D324917BCA94CEE995AC89D2E1C5CEC,K2Node_Knot_2 E8181E5FDB2D46ABBBFADC7007AB2514,K2Node_Knot 08B766EB8B1E4DF740B3614B8CC1F8B2,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=F34CF32EFD844A1C91B2C69947082846,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/Engine.BlueprintGeneratedClass'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce_C"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PersistentGuid=00000000000000000000000000000000,bHidden=True,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_CallFunction" Name="K2Node_CallFunction_4248" ExportPath=/Script/BlueprintGraph.K2Node_CallFunction'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_CallFunction_4248"'
                    FunctionReference=(MemberParent=/Script/CoreUObject.Class'"/Script/Engine.LightComponent"',MemberName="SetIntensity")
                    NodePosX=-96
                    NodePosY=-224
                    NodeGuid=A6A251FD44C9D09ACE54E19DF6182B12
                    CustomProperties Pin (PinId=25CB1132A7BA49AB925A8FA318964E23,PinName="execute",PinToolTip="\nExec",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_FunctionEntry_11 71907A84935B4C5CAAB3008925461DF1,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=0342A5C2A6524BC496509A5FE3E7878B,PinName="then",PinToolTip="\nExec",Direction="EGPD_Output",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_10657 88008E0A9E5542DA9068EF1C6658B46E,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=061FD7FAE33B40F49B6F736AEBD0FDA9,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinToolTip="Target\nLight Component Object Reference",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.LightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_Knot_0 36BEECD9937E406AB95722BB5BB7D8BF,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=A045E5D76A2541AE8B9D41EEA8684D06,PinName="NewIntensity",PinToolTip="New Intensity\nFloat (single-precision)",PinType.PinCategory="real",PinType.PinSubCategory="float",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_VariableGet_44 90D78D3F13EC4FA181FCC19C7C6106D4,),DefaultValue="0",AutogeneratedDefaultValue="0.0",PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_VariableGet" Name="K2Node_VariableGet_44" ExportPath=/Script/BlueprintGraph.K2Node_VariableGet'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_VariableGet_44"'
                    VariableReference=(MemberName="Brightness",MemberGuid=BA0410F246F371A058CD72AB86D957BD,bSelfContext=True)
                    NodePosX=-256
                    NodePosY=-112
                    NodeGuid=8A92F2CC426BB42C5AD261B6E6548557
                    CustomProperties Pin (PinId=90D78D3F13EC4FA181FCC19C7C6106D4,PinName="Brightness",Direction="EGPD_Output",PinType.PinCategory="real",PinType.PinSubCategory="double",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_4248 A045E5D76A2541AE8B9D41EEA8684D06,),DefaultValue="0",AutogeneratedDefaultValue="0.0",PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=170640B252CF4012A122D22A9AC1C8B4,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/Engine.BlueprintGeneratedClass'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce_C"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PersistentGuid=00000000000000000000000000000000,bHidden=True,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_CallFunction" Name="K2Node_CallFunction_10657" ExportPath=/Script/BlueprintGraph.K2Node_CallFunction'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_CallFunction_10657"'
                    FunctionReference=(MemberParent=/Script/CoreUObject.Class'"/Script/Engine.LightComponent"',MemberName="SetLightColor")
                    NodePosX=160
                    NodePosY=-224
                    NodeGuid=7647C9FC4D4D28E89F85C88A8CB2AD12
                    CustomProperties Pin (PinId=88008E0A9E5542DA9068EF1C6658B46E,PinName="execute",PinToolTip="\nExec",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_4248 0342A5C2A6524BC496509A5FE3E7878B,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=EB4CC7B4FAE04D3396AC3D17FF87E3C8,PinName="then",PinToolTip="\nExec",Direction="EGPD_Output",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_19069 037FE176F48E445593DC9E7A481AEF3D,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=10F6E0C030124D83844D944D7116B98A,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinToolTip="Target\nLight Component Object Reference",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.LightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_Knot_4 DA6D97B7C1C925DE074613822C885B6F,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=72534005C78C420EAEFA19172038B1F3,PinName="NewLightColor",PinToolTip="New Light Color\nLinear Color Structure",PinType.PinCategory="struct",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.ScriptStruct'"/Script/CoreUObject.LinearColor"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_VariableGet_131 E11890DA93464F48A6221977085C4549,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=4BE93BAC1CCB45AAAF1ADB7ADBE9FC4C,PinName="bSRGB",PinToolTip="SRGB\nBoolean",PinType.PinCategory="bool",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,DefaultValue="true",AutogeneratedDefaultValue="true",PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_VariableGet" Name="K2Node_VariableGet_131" ExportPath=/Script/BlueprintGraph.K2Node_VariableGet'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_VariableGet_131"'
                    VariableReference=(MemberName="Color",MemberGuid=AAEC3E9C476A2187972DDE8D142A814B,bSelfContext=True)
                    NodePosX=0
                    NodePosY=-32
                    NodeGuid=5BE70A964537A1F13BE2489B0DC06370
                    CustomProperties Pin (PinId=E11890DA93464F48A6221977085C4549,PinName="Color",Direction="EGPD_Output",PinType.PinCategory="struct",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.ScriptStruct'"/Script/CoreUObject.LinearColor"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_10657 72534005C78C420EAEFA19172038B1F3,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=506366A2BD594C01A714D4B3A4B67508,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/Engine.BlueprintGeneratedClass'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce_C"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PersistentGuid=00000000000000000000000000000000,bHidden=True,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_CallFunction" Name="K2Node_CallFunction_19069" ExportPath=/Script/BlueprintGraph.K2Node_CallFunction'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_CallFunction_19069"'
                    FunctionReference=(MemberParent=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',MemberName="SetInnerConeAngle")
                    NodePosX=416
                    NodePosY=-224
                    NodeGuid=BA1662924D2E0511EE6434B1176BA651
                    CustomProperties Pin (PinId=037FE176F48E445593DC9E7A481AEF3D,PinName="execute",PinToolTip="\nExec",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_10657 EB4CC7B4FAE04D3396AC3D17FF87E3C8,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=6F6DF8EDC2A548D8AA650E2226E492B2,PinName="then",PinToolTip="\nExec",Direction="EGPD_Output",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_23382 97E5A95A95D146349651027B62E74C6B,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=166F92FA9C8B45178DA43D14E4B62467,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinToolTip="Target\nSpot Light Component Object Reference",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_Knot_5 5EF164163CA08749BC9515941E3F9EB1,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=02BAE745DB3C4EEA9C4FD44D2877E95D,PinName="NewInnerConeAngle",PinToolTip="New Inner Cone Angle\nFloat (single-precision)",PinType.PinCategory="real",PinType.PinSubCategory="float",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_VariableGet_181 7F19DF17FB3C4927A31AC4A642E3FC82,),DefaultValue="0",AutogeneratedDefaultValue="0.0",PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_VariableGet" Name="K2Node_VariableGet_181" ExportPath=/Script/BlueprintGraph.K2Node_VariableGet'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_VariableGet_181"'
                    VariableReference=(MemberName="Inner Cone Angle",MemberGuid=89450A00436C23321534D7AF2F9B70FB,bSelfContext=True)
                    NodePosX=240
                    NodePosY=48
                    NodeGuid=A37690AE4A2AB23BBA55C2828CCA575E
                    CustomProperties Pin (PinId=7F19DF17FB3C4927A31AC4A642E3FC82,PinName="Inner Cone Angle",Direction="EGPD_Output",PinType.PinCategory="real",PinType.PinSubCategory="double",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_19069 02BAE745DB3C4EEA9C4FD44D2877E95D,),DefaultValue="0",AutogeneratedDefaultValue="0.0",PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=4A7B5FE1C8904A129EA3DA71EADFC22F,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/Engine.BlueprintGeneratedClass'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce_C"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PersistentGuid=00000000000000000000000000000000,bHidden=True,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_CallFunction" Name="K2Node_CallFunction_23382" ExportPath=/Script/BlueprintGraph.K2Node_CallFunction'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_CallFunction_23382"'
                    FunctionReference=(MemberParent=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',MemberName="SetOuterConeAngle")
                    NodePosX=704
                    NodePosY=-224
                    NodeGuid=A5A1294746E0AE46D3A54898D49E3AAC
                    CustomProperties Pin (PinId=97E5A95A95D146349651027B62E74C6B,PinName="execute",PinToolTip="\nExec",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_19069 6F6DF8EDC2A548D8AA650E2226E492B2,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=EEE223529F7B4518AD4728D162BD53A4,PinName="then",PinToolTip="\nExec",Direction="EGPD_Output",PinType.PinCategory="exec",PinType.PinSubCategory="",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=F77504B5153A43548D6327B5AD7211DA,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinToolTip="Target\nSpot Light Component Object Reference",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_Knot_3 CDBF43604F518A9B8EFD3DA0C1D57B9F,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=FB753E8540C1460EA0564D3BF1C962EA,PinName="NewOuterConeAngle",PinToolTip="New Outer Cone Angle\nFloat (single-precision)",PinType.PinCategory="real",PinType.PinSubCategory="float",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_VariableGet_232 DF69580CD4D5489A99B4AB51D36B1EF2,),DefaultValue="0",AutogeneratedDefaultValue="0.0",PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_VariableGet" Name="K2Node_VariableGet_232" ExportPath=/Script/BlueprintGraph.K2Node_VariableGet'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_VariableGet_232"'
                    VariableReference=(MemberName="Outer Cone Angle",MemberGuid=F7A3E7204D4A41FD52F9E0BE45776108,bSelfContext=True)
                    NodePosX=480
                    NodePosY=128
                    NodeGuid=1E08943C45AAC05E77B8CA8C7B9719E2
                    CustomProperties Pin (PinId=DF69580CD4D5489A99B4AB51D36B1EF2,PinName="Outer Cone Angle",Direction="EGPD_Output",PinType.PinCategory="real",PinType.PinSubCategory="double",PinType.PinSubCategoryObject=None,PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_23382 FB753E8540C1460EA0564D3BF1C962EA,),DefaultValue="0",AutogeneratedDefaultValue="0.0",PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=60068FD03F8E42E6B86734A63966C978,PinName="self",PinFriendlyName=NSLOCTEXT("K2Node", "Target", "Target"),PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/Engine.BlueprintGeneratedClass'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce_C"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PersistentGuid=00000000000000000000000000000000,bHidden=True,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_Knot" Name="K2Node_Knot_0" ExportPath=/Script/BlueprintGraph.K2Node_Knot'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_Knot_0"'
                    NodePosX=-256
                    NodePosY=-144
                    NodeGuid=2673BBB2B8F74DB68ADAD5FED768E1FD
                    CustomProperties Pin (PinId=D2794C8E4DB3434AAB92AC0592A1CDAD,PinName="InputPin",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_VariableGet_1 31AFCE7083BE417EA1B4267CAD23C84F,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=True,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=36BEECD9937E406AB95722BB5BB7D8BF,PinName="OutputPin",Direction="EGPD_Output",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_CallFunction_4248 061FD7FAE33B40F49B6F736AEBD0FDA9,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_Knot" Name="K2Node_Knot_1" ExportPath=/Script/BlueprintGraph.K2Node_Knot'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_Knot_1"'
                    NodePosX=-256
                    NodePosY=-64
                    NodeGuid=3B925EE47581488FA93929801A3CCDEA
                    CustomProperties Pin (PinId=7D324917BCA94CEE995AC89D2E1C5CEC,PinName="InputPin",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_VariableGet_1 31AFCE7083BE417EA1B4267CAD23C84F,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=True,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=DCC8906B038E4BA4A697831AC6252FA7,PinName="OutputPin",Direction="EGPD_Output",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_Knot_4 2337DC956720604963C62E0A263F1534,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_Knot" Name="K2Node_Knot_2" ExportPath=/Script/BlueprintGraph.K2Node_Knot'"/Game/StarterContent/Blueprints/Blueprint_WallSconce.Blueprint_WallSconce:UserConstructionScript.K2Node_Knot_2"'
                    NodePosX=-256
                    NodePosY=96
                    NodeGuid=09D2ED0B5CAF4B1DAE6145B8ADCE0E1B
                    CustomProperties Pin (PinId=E8181E5FDB2D46ABBBFADC7007AB2514,PinName="InputPin",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_VariableGet_1 31AFCE7083BE417EA1B4267CAD23C84F,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=True,bAdvancedView=False,bOrphanedPin=False,)
                    CustomProperties Pin (PinId=3927E661939B49E4B147C0A02AB5B2E9,PinName="OutputPin",Direction="EGPD_Output",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.ContainerType=None,PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,LinkedTo=(K2Node_Knot_3 E7068ECC470927AEC180828F99DBCD6C,),PersistentGuid=00000000000000000000000000000000,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_Knot" Name="K2Node_Knot_3"
                    NodePosX=560
                    NodePosY=96
                    CustomProperties Pin (PinId=E7068ECC470927AEC180828F99DBCD6C,PinName="InputPin",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PinType.ContainerType=None,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,LinkedTo=(K2Node_Knot_2 3927E661939B49E4B147C0A02AB5B2E9,),)
                    CustomProperties Pin (PinId=CDBF43604F518A9B8EFD3DA0C1D57B9F,PinName="OutputPin",Direction="EGPD_Output",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PinType.ContainerType=None,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,LinkedTo=(K2Node_CallFunction_23382 F77504B5153A43548D6327B5AD7211DA,),)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_Knot" Name="K2Node_Knot_4"
                    NodePosX=64
                    NodePosY=-64
                    CustomProperties Pin (PinId=2337DC956720604963C62E0A263F1534,PinName="InputPin",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.LightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PinType.ContainerType=None,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,LinkedTo=(K2Node_Knot_1 DCC8906B038E4BA4A697831AC6252FA7,),)
                    CustomProperties Pin (PinId=DA6D97B7C1C925DE074613822C885B6F,PinName="OutputPin",Direction="EGPD_Output",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.LightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PinType.ContainerType=None,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,LinkedTo=(K2Node_CallFunction_10657 10F6E0C030124D83844D944D7116B98A,),)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_Knot" Name="K2Node_Knot_5"
                    NodePosX=304
                    NodePosY=16
                    CustomProperties Pin (PinId=C4FAC08BE98C14507F0D997D33B06FE8,PinName="InputPin",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PinType.ContainerType=None,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,LinkedTo=(K2Node_Knot 34A0698A588AF5B070CFC2C911DE0629,),)
                    CustomProperties Pin (PinId=5EF164163CA08749BC9515941E3F9EB1,PinName="OutputPin",Direction="EGPD_Output",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PinType.ContainerType=None,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,LinkedTo=(K2Node_CallFunction_19069 166F92FA9C8B45178DA43D14E4B62467,),)
                End Object
                Begin Object Class="/Script/BlueprintGraph.K2Node_Knot" Name="K2Node_Knot"
                    NodePosX=-256
                    NodePosY=16
                    CustomProperties Pin (PinId=08B766EB8B1E4DF740B3614B8CC1F8B2,PinName="InputPin",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PinType.ContainerType=None,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,LinkedTo=(K2Node_VariableGet_1 31AFCE7083BE417EA1B4267CAD23C84F,),)
                    CustomProperties Pin (PinId=34A0698A588AF5B070CFC2C911DE0629,PinName="OutputPin",Direction="EGPD_Output",PinType.PinCategory="object",PinType.PinSubCategory="",PinType.PinSubCategoryObject=/Script/CoreUObject.Class'"/Script/Engine.SpotLightComponent"',PinType.PinSubCategoryMemberReference=(),PinType.PinValueType=(),PinType.bIsReference=False,PinType.bIsConst=False,PinType.bIsWeakPointer=False,PinType.bIsUObjectWrapper=False,PinType.bSerializeAsSinglePrecisionFloat=False,PinType.ContainerType=None,bHidden=False,bNotConnectable=False,bDefaultValueIsReadOnly=False,bDefaultValueIsIgnored=False,bAdvancedView=False,bOrphanedPin=False,LinkedTo=(K2Node_Knot_5 C4FAC08BE98C14507F0D997D33B06FE8,),)
                End Object                        
            </template>
            <input type="text" class="floating-input" placeholder="Enter text..." />
        </ueb-blueprint>
    </code>

    <script>
        // Node Search System
        let nodesDatabase = null;
        let selectedIndex = 0;
        let filteredNodes = [];
        let contextMenuPosition = { x: 0, y: 0 };
        let lastMousePosition = { x: 0, y: 0 };

        // Load nodes database
        async function loadNodesDatabase() {
            try {
                const response = await fetch('ue_blueprint_nodes_merged.json');
                const data = await response.json();
                nodesDatabase = data.nodes;
                const spawnable = data.spawnableNodes || nodesDatabase.filter(n => n.canSpawn).length;
                console.log(`âœ“ Loaded ${nodesDatabase.length} blueprint nodes (${spawnable} spawnable, ${nodesDatabase.length - spawnable} search-only)`);
            } catch (error) {
                console.error('Failed to load nodes database:', error);
            }
        }

        // Show context menu
        function showContextMenu(x, y) {
            const menu = document.getElementById('nodeSearchMenu');
            const input = document.getElementById('nodeSearchInput');

            // Position menu
            menu.style.left = x + 'px';
            menu.style.top = y + 'px';
            menu.classList.add('visible');

            // Store position for node spawning
            contextMenuPosition = { x, y };

            // Clear and focus input
            input.value = '';
            input.focus();

            // Show all nodes initially
            filterNodes('');
        }

        // Hide context menu
        function hideContextMenu() {
            const menu = document.getElementById('nodeSearchMenu');
            menu.classList.remove('visible');
            selectedIndex = 0;
        }

        // Filter nodes based on search query
        function filterNodes(query) {
            if (!nodesDatabase) return;

            const results = document.getElementById('nodeSearchResults');
            results.innerHTML = '';

            // Only show spawnable node types: Variable and Flow Control
            // Exclude Function nodes (most don't have proper function signatures)
            // Exclude Utility, Struct, Event, Actor, Timeline, Cast, Delegate nodes
            const spawnableTypes = ['Variable', 'Flow Control'];
            const candidateNodes = nodesDatabase.filter(node =>
                spawnableTypes.includes(node.nodeType)
            );

            // Filter nodes by search query
            if (query.trim() === '') {
                // Show first 100 when no query
                filteredNodes = candidateNodes.slice(0, 100);
            } else {
                const searchLower = query.toLowerCase();
                filteredNodes = candidateNodes.filter(node => {
                    const nameMatch = node.displayName?.toLowerCase().includes(searchLower);
                    const classMatch = node.className?.toLowerCase().includes(searchLower);
                    const typeMatch = node.nodeType?.toLowerCase().includes(searchLower);
                    const categoryMatch = node.category?.toLowerCase().includes(searchLower);
                    const descMatch = node.description?.toLowerCase().includes(searchLower);
                    const keywordMatch = node.keywords?.toLowerCase().includes(searchLower);

                    return nameMatch || classMatch || typeMatch || categoryMatch || descMatch || keywordMatch;
                }).slice(0, 100);
            }

            // Reset selected index
            selectedIndex = 0;

            // Display results
            if (filteredNodes.length === 0) {
                results.innerHTML = '<div class="node-search-no-results">No nodes found</div>';
                return;
            }

            filteredNodes.forEach((node, index) => {
                const item = document.createElement('div');
                item.className = 'node-search-item' + (index === 0 ? ' selected' : '');
                item.dataset.index = index;

                const truncateDesc = (text, maxLength = 80) => {
                    if (!text) return '';
                    return text.length > maxLength ? text.substring(0, maxLength) + '...' : text;
                };

                // Show spawnable status
                const spawnStatus = node.canSpawn ? '' : ' <span style="color: #888;">(search only)</span>';
                const nodeTypeText = node.nodeType || node.category || '';
                const pureText = node.isPure ? ' (Pure)' : '';

                item.innerHTML = `
                    <div class="node-search-item-name">${node.displayName || node.className}${spawnStatus}</div>
                    <div class="node-search-item-type">${nodeTypeText}${pureText}</div>
                    ${node.description ? `<div class="node-search-item-desc">${truncateDesc(node.description)}</div>` : ''}
                `;

                item.addEventListener('click', () => spawnNode(node));
                results.appendChild(item);
            });
        }

        // Update selected item
        function updateSelection(newIndex) {
            const items = document.querySelectorAll('.node-search-item');
            if (items.length === 0) return;

            // Clamp index
            selectedIndex = Math.max(0, Math.min(newIndex, items.length - 1));

            // Update classes
            items.forEach((item, index) => {
                item.classList.toggle('selected', index === selectedIndex);
            });

            // Scroll into view
            items[selectedIndex]?.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
        }

        // Generate a random GUID (32 hex characters)
        function generateGUID() {
            return 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'.replace(/x/g, () =>
                Math.floor(Math.random() * 16).toString(16).toUpperCase()
            );
        }

        // Generate a unique node name
        let nodeCounter = 0;
        function generateNodeName(className) {
            return `${className}_${Date.now()}_${nodeCounter++}`;
        }

        // Create a serialized node string based on node type
        function createNodeSerialization(node, posX, posY) {
            const nodeName = generateNodeName(node.className);
            const nodeGuid = generateGUID();
            const classPath = `/Script/BlueprintGraph.${node.className}`;

            // Base serialization - minimal structure that the library can parse
            let serialization = `Begin Object Class="${classPath}" Name="${nodeName}"
    NodePosX=${Math.round(posX)}
    NodePosY=${Math.round(posY)}
    NodeGuid=${nodeGuid}`;

            // Add specific properties based on node type
            if (node.className.includes('CallFunction')) {
                // For function call nodes, use the function signature from the node if available
                if (node.functionSignature) {
                    // Parse the function signature to extract MemberParent and MemberName
                    // Format: "ReturnType FunctionName(Params)"
                    const funcName = node.functionSignature.match(/\s+(\w+)\(/)?.[1] || node.displayName;
                    serialization += `
    FunctionReference=(MemberParent=/Script/CoreUObject.Class'"/Script/Engine.KismetSystemLibrary"',MemberName="${funcName}")`;
                } else if (node.displayName) {
                    // Use display name if available
                    serialization += `
    FunctionReference=(MemberParent=/Script/CoreUObject.Class'"/Script/Engine.KismetSystemLibrary"',MemberName="${node.displayName.replace(/\s+/g, '')}")`;
                } else {
                    // Fallback to generic print function
                    serialization += `
    FunctionReference=(MemberParent=/Script/CoreUObject.Class'"/Script/Engine.KismetSystemLibrary"',MemberName="PrintString")`;
                }
            } else if (node.className.includes('VariableGet') || node.className.includes('VariableSet')) {
                // For variable nodes, use display name if available
                const varName = node.displayName ? node.displayName.replace(/\s+/g, '') : 'NewVar';
                serialization += `
    VariableReference=(MemberName="${varName}",bSelfContext=True)`;
            }

            serialization += `
End Object`;

            return serialization;
        }

        // Spawn node on canvas
        function spawnNode(node) {
            // Check if node is spawnable
            if (!node.canSpawn || !node.className) {
                alert(`"${node.displayName}" is search-only.\n\nThis node doesn't have spawn data yet. It will be available after Phase 2 scraping completes.`);
                hideContextMenu();
                return;
            }

            try {
                console.log('=== Spawning node ===');
                console.log('Node:', node.className, node.displayName);
                console.log('Position:', contextMenuPosition);

                const canvas = document.querySelector('ueb-blueprint');
                if (!canvas) {
                    console.error('Blueprint canvas not found');
                    alert('Blueprint canvas not found!');
                    return;
                }

                console.log('Canvas found:', canvas);
                console.log('Canvas properties:', { scrollX: canvas.scrollX, scrollY: canvas.scrollY, zoom: canvas.zoom });

                // Convert screen coordinates to blueprint canvas coordinates
                const rect = canvas.getBoundingClientRect();
                console.log('Canvas rect:', rect);

                const scrollX = canvas.scrollX || 0;
                const scrollY = canvas.scrollY || 0;
                const zoom = canvas.zoom || 0;
                const zoomFactor = Math.pow(2, zoom);

                // Calculate position relative to canvas
                const canvasX = (contextMenuPosition.x - rect.left) / zoomFactor + scrollX;
                const canvasY = (contextMenuPosition.y - rect.top) / zoomFactor + scrollY;
                console.log('Canvas position:', canvasX, canvasY);

                // Create serialized node
                const serialization = createNodeSerialization(node, canvasX, canvasY);
                console.log('Serialization:', serialization);

                // Create node element from serialization
                if (!window.NodeElement) {
                    console.error('NodeElement not available yet - waiting for module to load');
                    setTimeout(() => spawnNode(node), 100);
                    return;
                }

                console.log('Creating NodeElement...');
                const nodeElement = window.NodeElement.fromSerializedObject(serialization);
                console.log('NodeElement created:', nodeElement);

                // Set the blueprint reference on the node
                nodeElement.blueprint = canvas;
                console.log('Blueprint reference set on node');

                // Add node to blueprint
                console.log('Adding to blueprint...');
                if (typeof canvas.addGraphElement === 'function') {
                    canvas.addGraphElement(nodeElement);
                    console.log('âœ“ Node added via addGraphElement');

                    // Force update/render
                    if (typeof canvas.requestUpdate === 'function') {
                        canvas.requestUpdate();
                        console.log('Requested canvas update');
                    }

                    // Check if node is in DOM and visible
                    setTimeout(() => {
                        const nodesInDOM = canvas.querySelectorAll('ueb-node');
                        console.log('Total nodes in DOM:', nodesInDOM.length);
                        const isInDOM = canvas.contains(nodeElement);
                        console.log('New node is in DOM:', isInDOM);

                        if (isInDOM) {
                            const rect = nodeElement.getBoundingClientRect();
                            const canvasRect = canvas.getBoundingClientRect();
                            console.log('Node rect:', rect);
                            console.log('Canvas rect:', canvasRect);
                            console.log('Node visible:', rect.width > 0 && rect.height > 0);

                            // Check if node is in viewport
                            const inViewport = rect.top >= canvasRect.top &&
                                             rect.left >= canvasRect.left &&
                                             rect.bottom <= canvasRect.bottom &&
                                             rect.right <= canvasRect.right;
                            console.log('Node in viewport:', inViewport);
                        } else {
                            console.error('Node was not added to DOM!');
                        }
                    }, 200);
                } else {
                    console.error('addGraphElement is not a function!', typeof canvas.addGraphElement);
                    console.log('Available canvas methods:', Object.getOwnPropertyNames(Object.getPrototypeOf(canvas)));
                    alert('Error: addGraphElement method not found on canvas');
                }

                console.log('âœ“ Node spawned successfully:', node.displayName || node.className);

            } catch (error) {
                console.error('Error spawning node:', error);
                console.error('Error stack:', error.stack);
                alert(`Error spawning node: ${error.message}\n\nCheck console for details.`);
            }

            hideContextMenu();
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', () => {
            loadNodesDatabase();

            const canvas = document.querySelector('ueb-blueprint');
            const input = document.getElementById('nodeSearchInput');

            // Track mouse position globally
            document.addEventListener('mousemove', (e) => {
                lastMousePosition = { x: e.clientX, y: e.clientY };
            });

            // Tab key to open node menu
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Tab' && !e.shiftKey && !e.ctrlKey && !e.altKey && !e.metaKey) {
                    // Only if not already typing in the search input
                    if (document.activeElement !== input) {
                        if (!nodesDatabase) return;

                        e.preventDefault();
                        console.log('Tab pressed - opening node menu at:', lastMousePosition);
                        showContextMenu(lastMousePosition.x, lastMousePosition.y);
                    }
                }
            });

            // Click outside to close
            document.addEventListener('click', (e) => {
                const menu = document.getElementById('nodeSearchMenu');
                if (!menu.contains(e.target)) {
                    hideContextMenu();
                }
            });

            // Search input
            input.addEventListener('input', (e) => {
                filterNodes(e.target.value);
            });

            // Keyboard navigation
            input.addEventListener('keydown', (e) => {
                switch(e.key) {
                    case 'ArrowDown':
                        e.preventDefault();
                        updateSelection(selectedIndex + 1);
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        updateSelection(selectedIndex - 1);
                        break;
                    case 'Enter':
                        e.preventDefault();
                        if (filteredNodes[selectedIndex]) {
                            spawnNode(filteredNodes[selectedIndex]);
                        }
                        break;
                    case 'Escape':
                        e.preventDefault();
                        hideContextMenu();
                        break;
                }
            });
        });
    </script>
</body>

</html>
